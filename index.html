<!DOCTYPE html>
<html>
<head>
	<title>North American Tree Distribution Visualization</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./css/leaflet.css" />
	<link rel="stylesheet" href="./css/main.css" />
</head>

<body>
	<div id="info">
		<div id="infoHeader">
			North American Tree Distribution
			<div class="helpButton">
				<a href="#" onclick="showHelp()">&nbsp; ? &nbsp;</a>
			</div>
		</div>
		<div id="help"></div>
		<div id="locationPreview">Hover over regions to show data</div>
		<div id="treeTableDiv">
			<div id="treeTableHeader">Click on a region for a list of trees</div>
			<table id="treeTable" class="mytable"></table>
		</div>		
	</div>
	<div id="mapContainer">
		<div id="map"></div>
	</div>
	
	<script src="./js/leaflet.js"></script>
	<script src="./js/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="./data_locs/states.js"></script>
	<script type="text/javascript" src="./js/viz.js"></script>
	
	<script type="text/javascript">
	  function reload_js(src) {
      $('script[src="./js/viz.js"]').remove();
      $('<script>').attr('src', src).appendTo('head');
	  }

		function loadRegion(region) {
			destroyMap();
			$.getScript("./data_locs/" + region + ".js");
		  reload_js('./js/viz.js');
		};
		
		function showHelp() {
			var helpDiv = document.getElementById('help')
			helpText = "This is a visualization of the distribution of tree species across the US.<br /><br />"
			helpText += "Regions are colored according to the number and uniqueness of tree species they contain. Darker regions contain more trees, and bluer regions have trees with lower coverage - i.e. trees that are found in fewer locations. <br /><br />"
			helpText += "Click on a region to display the trees it contains, sorted by coverage. Click on 'show' next to each tree to view that species range on the map. <br /><br />"
			helpText += "Use the links in the map legend to explore different regions of the country. Make sure to click twice to load regional maps.<br /><br />"
			helpDiv.innerHTML = helpText;
			
			$('#help').append($('<a href="https://github.com/nsrivast/tree-range-viz">See how this was made</a><br /><br />'));
			$('#help').append($('<a href="#" class="helpButton" onclick="hideHelp()">(close help)</a>'));
			$('#help').append($('<a href="https://github.com/nsrivast/tree-range-viz">Read an analysis of the results</a><br /><br />'));
		};
		
		function hideHelp() {
			var helpDiv = document.getElementById('help')
			helpDiv.innerHTML = "";
		};
		
	</script>
	
	</body>
</html>
